# نظام إدارة مرتبات العمال

نظام محلي لإدارة مرتبات العمال حسب مناطق العمل المختلفة مع إمكانية إضافة بدلات الانتقال وتصدير التقارير.

## المميزات

- **إدارة الموظفين**: إضافة وتعديل وحذف الموظفين
- **إدارة المناطق**: إدارة مناطق العمل المختلفة
- **أسعار فردية**: كل موظف له سعر مختلف في كل منطقة
- **حساب المرتبات**: حساب المرتب الأساسي + بدل الانتقالات
- **سجل المرتبات**: عرض وإدارة جميع سجلات المرتبات
- **تصدير PDF**: تصدير التقارير بصيغة PDF
- **واجهة عربية**: واجهة مستخدم باللغة العربية
- **قاعدة بيانات محلية**: تخزين البيانات محلياً باستخدام SQLite

## متطلبات النظام

- Python 3.8 أو أحدث
- نظام التشغيل: Windows, macOS, أو Linux

## التثبيت

### 1. تحميل المشروع
```bash
# إذا كان لديك git
git clone <repository-url>
cd salary_management

# أو قم بتحميل الملفات وفك الضغط
```

### 2. إنشاء بيئة افتراضية (اختياري ولكن مُوصى به)
```bash
python -m venv venv

# على Windows
venv\Scripts\activate

# على macOS/Linux
source venv/bin/activate
```

### 3. تثبيت المتطلبات
```bash
pip install -r requirements.txt
```

## تشغيل البرنامج

```bash
python main.py
```

## استخدام البرنامج

### 1. الإعداد الأولي

عند تشغيل البرنامج لأول مرة، سيتم إنشاء:
- قاعدة بيانات SQLite في مجلد `data/`
- بيانات تجريبية (موظفين ومناطق وأسعار)

### 2. إدارة الموظفين

- انتقل إلى تبويب "الإعدادات"
- اضغط على "إدارة الموظفين"
- يمكنك إضافة، تعديل، أو حذف الموظفين

### 3. إدارة المناطق

- انتقل إلى تبويب "الإعدادات"
- اضغط على "إدارة المناطق"
- يمكنك إضافة، تعديل، أو حذف المناطق

### 4. إدارة الأسعار

- في تبويب "حساب المرتبات"
- اضغط على "إدارة الأسعار"
- يمكنك مشاهدة أسعار كل موظف في كل منطقة

### 5. حساب المرتبات

1. اختر الموظف من القائمة المنسدلة
2. اختر المنطقة من القائمة المنسدلة
3. سيظهر المرتب الأساسي تلقائياً
4. أدخل بدل الانتقالات (اختياري)
5. سيتم حساب الإجمالي تلقائياً
6. اضغط "حفظ السجل"

### 6. عرض السجلات

- تبويب "سجل المرتبات" يعرض جميع السجلات المحفوظة
- يمكن ترتيب السجلات حسب أي عمود
- يمكن البحث والتصفية

### 7. تصدير PDF

- اضغط على "تصدير PDF" من أي مكان في البرنامج
- سيتم إنشاء ملف PDF في مجلد `reports/`
- يحتوي التقرير على جميع السجلات والإجمالي العام

## هيكل المشروع

```
salary_management/
├── main.py                 # نقطة دخول البرنامج
├── requirements.txt        # متطلبات Python
├── README.md              # هذا الملف
├── database/              # طبقة قاعدة البيانات
│   ├── __init__.py
│   ├── db_manager.py      # إدارة قاعدة البيانات
│   └── models.py          # نماذج البيانات
├── gui/                   # واجهة المستخدم
│   ├── __init__.py
│   ├── main_window.py     # النافذة الرئيسية
│   ├── employee_form.py   # نموذج إدارة الموظفين
│   ├── area_form.py       # نموذج إدارة المناطق
│   ├── salary_form.py     # نموذج حساب المرتبات
│   └── styles.py          # أنماط الواجهة
├── utils/                 # أدوات مساعدة
│   ├── __init__.py
│   ├── pdf_export.py      # تصدير PDF
│   └── validators.py      # التحقق من البيانات
├── data/                  # قاعدة البيانات (يتم إنشاؤها تلقائياً)
│   └── salary_management.db
└── reports/               # تقارير PDF (يتم إنشاؤها تلقائياً)
```

## قاعدة البيانات

يستخدم البرنامج قاعدة بيانات SQLite محلية تحتوي على:

### جدول الموظفين (employees)
- id: رقم الموظف
- name: اسم الموظف
- created_at: تاريخ الإضافة

### جدول المناطق (areas)
- id: رقم المنطقة
- name: اسم المنطقة
- created_at: تاريخ الإضافة

### جدول أسعار الموظفين (employee_area_rates)
- id: رقم السجل
- employee_id: رقم الموظف
- area_id: رقم المنطقة
- base_salary: المرتب الأساسي
- created_at: تاريخ الإضافة

### جدول سجلات المرتبات (salary_records)
- id: رقم السجل
- employee_id: رقم الموظف
- area_id: رقم المنطقة
- base_salary: المرتب الأساسي
- allowance: بدل الانتقالات
- total: الإجمالي
- date_created: تاريخ الإنشاء

## استكشاف الأخطاء

### مشكلة في تشغيل البرنامج
- تأكد من تثبيت Python 3.8 أو أحدث
- تأكد من تثبيت جميع المتطلبات: `pip install -r requirements.txt`

### مشكلة في قاعدة البيانات
- احذف ملف `data/salary_management.db` وأعد تشغيل البرنامج
- سيتم إنشاء قاعدة بيانات جديدة مع بيانات تجريبية

### مشكلة في تصدير PDF
- تأكد من تثبيت مكتبة ReportLab: `pip install reportlab`
- تأكد من وجود صلاحيات الكتابة في مجلد المشروع

### مشكلة في عرض النصوص العربية
- تأكد من أن نظام التشغيل يدعم الخطوط العربية
- في بعض الأنظمة قد تحتاج لتثبيت خطوط عربية إضافية

## التطوير والتخصيص

### إضافة حقول جديدة
1. عدّل نماذج البيانات في `database/models.py`
2. عدّل قاعدة البيانات في `database/db_manager.py`
3. عدّل واجهة المستخدم في ملفات `gui/`

### تخصيص التقارير
- عدّل ملف `utils/pdf_export.py` لتخصيص شكل التقارير
- يمكن إضافة تقارير جديدة بنفس الطريقة

### تخصيص الواجهة
- عدّل ملف `gui/styles.py` لتغيير الألوان والخطوط
- عدّل ملفات النماذج لتغيير التخطيط

## الدعم

إذا واجهت أي مشاكل أو لديك اقتراحات للتحسين، يرجى:
1. التأكد من اتباع تعليمات التثبيت بدقة
2. مراجعة قسم استكشاف الأخطاء
3. التواصل مع فريق التطوير

## الترخيص

هذا البرنامج مجاني للاستخدام الشخصي والتجاري.

---

**نظام إدارة مرتبات العمال - الإصدار 1.0**
